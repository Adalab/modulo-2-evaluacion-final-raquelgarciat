const charListElement=document.querySelector(".character_list"),favListElement=document.querySelector(".favorites_list"),favSection=document.querySelector(".favorites-section");let charDataList=[],favCharacterList=[];const storedFav=JSON.parse(localStorage.getItem("favdata"));function init(){storedFav?(favCharacterList=storedFav,renderFavList(favCharacterList),favSection.classList.remove("collapsed")):favSection.classList.add("collapsed")}function renderCharacter(a){return`<li id="${a._id}" class="character_list-one js-li-character">\n      <img\n        class="char_img"\n        src=${a.imageUrl}\n        alt="character"\n      />\n      <p class="char_name">${a.name}</p>\n    </li>`}function renderCharList(){charListElement.innerHTML="";for(const a of charDataList)charListElement.innerHTML+=renderCharacter(a);addEventCharacter()}function addEventCharacter(){const a=document.querySelectorAll(".js-li-character");for(const e of a)e.addEventListener("click",handleClick)}function handleClick(a){const e=a.currentTarget.id,t=parseInt(e),r=charDataList.find(a=>a._id===t),c=favCharacterList.findIndex(a=>a._id===t);favSection.classList.remove("collapsed"),-1===c?favCharacterList.push(r):favCharacterList.splice(c,1),localStorage.setItem("favdata",JSON.stringify(favCharacterList)),console.log(favCharacterList),renderFavList(),clear()}function renderFavList(){favSection.classList.remove("collapsed"),favListElement.innerHTML="";for(const a of favCharacterList)favListElement.innerHTML+=renderCharacter(a)}function clear(){0===favCharacterList.length&&favSection.classList.add("collapsed")}init(),fetch("http://api.disneyapi.dev/character?pageSize=50").then(a=>a.json()).then(a=>{console.log(a),charDataList=a.data,renderCharList(charDataList)});