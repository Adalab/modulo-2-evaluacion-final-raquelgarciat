const charListElement=document.querySelector(".character_list"),favListElement=document.querySelector(".favorites_list"),favSection=document.querySelector(".favorites-section");let charDataList=[],favCharacterList=[];const dataLS=JSON.parse(localStorage.getItem("data"));function init(){dataLS?(charDataList=dataLS,renderCharList(charDataList)):fetch("http://api.disneyapi.dev/character?pageSize=50").then(a=>a.json()).then(a=>{console.log(a),charDataList=a.data,renderCharList(charDataList),localStorage.setItem("data",JSON.stringify(charDataList))})}function renderCharacter(a){return`<li id="${a._id}" class="character_list-one js-li-character">\n      <img\n        class="char_img"\n        src=${a.imageUrl}\n        alt="character"\n      />\n      <p class="char_name">${a.name}</p>\n    </li>`}function renderCharList(a){charListElement.innerHTML="";for(const t of a)charListElement.innerHTML+=renderCharacter(t);addEventCharacter()}function addEventCharacter(){const a=document.querySelectorAll(".js-li-character");for(const t of a)t.addEventListener("click",handleClick)}function handleClick(a){const t=a.currentTarget.id,e=parseInt(t),r=charDataList.find(a=>a._id===e),c=favCharacterList.findIndex(a=>a._id===e);favSection.classList.remove("collapsed"),-1===c?favCharacterList.push(r):favCharacterList.splice(c,1),console.log(favCharacterList),renderFavList(),clear()}function renderFavList(){favSection.classList.remove("collapsed"),favListElement.innerHTML="";for(const a of favCharacterList)favListElement.innerHTML+=renderCharacter(a)}function clear(){0===favCharacterList.length&&favSection.classList.add("collapsed")}init();